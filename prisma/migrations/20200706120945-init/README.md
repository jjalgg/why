# Migration `20200706120945-init`

This migration has been generated by b6332596 at 7/6/2020, 12:09:45 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TYPE "Role" AS ENUM ('ADMIN', 'MARSHAL', 'USER', 'VIEWER');

CREATE TABLE "public"."BookMark" (
"authorId" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,"postId" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Claim" (
"authorId" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"email" text  NOT NULL ,"id" text  NOT NULL ,"postNumber" SERIAL,"text" text  NOT NULL ,"title" text  NOT NULL ,"type" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."CodeConfirm" (
"code" text   ,"email" text   ,"id" text  NOT NULL ,"logInId" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Comment" (
"authorId" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,"likeCounts" integer  NOT NULL DEFAULT 0,"nick" text  NOT NULL DEFAULT E'',"postId" text   ,"published" boolean  NOT NULL DEFAULT true,"reportCounts" integer  NOT NULL DEFAULT 0,"text" text  NOT NULL ,"updatedAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."CommentDis" (
"authorId" text   ,"commentId" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."CommentLike" (
"authorId" text   ,"commentId" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Post" (
"allowComments" boolean  NOT NULL DEFAULT true,"authorId" text   ,"category" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"hits" integer  NOT NULL DEFAULT 0,"id" text  NOT NULL ,"isHtml" boolean   DEFAULT false,"likeCounts" integer  NOT NULL DEFAULT 0,"postNumber" SERIAL,"published" boolean  NOT NULL DEFAULT true,"reportCounts" integer  NOT NULL DEFAULT 0,"text" text  NOT NULL ,"title" text  NOT NULL ,"updatedAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"url" text []  ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."PostDis" (
"authorId" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,"postId" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."PostLike" (
"authorId" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,"postId" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Report" (
"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"done" boolean  NOT NULL DEFAULT false,"id" text  NOT NULL ,"original" text  NOT NULL ,"report" text   ,"reporter" text  NOT NULL ,"suspect" text   ,"type" text  NOT NULL ,"where" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Forbidden" (
"cause" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,"marshal" text   ,"original" text   ,"released" boolean  NOT NULL DEFAULT false,"subjectId" text   ,"term" Decimal(65,30)   ,"where" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."Penalty" (
"cause" text   ,"commentId" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,"marshal" text   ,"original" text   ,"postId" text   ,"punishment" text   ,"reportId" text   ,"suspect" text   ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."User" (
"banList" text []  ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"email" text   ,"followList" text []  ,"id" text  NOT NULL ,"isForbidden" boolean  NOT NULL DEFAULT false,"lastLoggedIn" Decimal(65,30)  NOT NULL DEFAULT 0,"logInId" text  NOT NULL ,"nick" text  NOT NULL DEFAULT E'none',"password" text  NOT NULL ,"reportCounts" integer  NOT NULL DEFAULT 0,"role" "Role" NOT NULL DEFAULT E'USER',"secret" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."AdminPost" (
"authorId" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,"text" text  NOT NULL ,"title" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."AdminComment" (
"authorId" text   ,"createdAt" timestamp(3)  NOT NULL DEFAULT CURRENT_TIMESTAMP,"id" text  NOT NULL ,"postId" text   ,"text" text  NOT NULL ,
    PRIMARY KEY ("id"))

CREATE TABLE "public"."_UserBan" (
"A" text  NOT NULL ,"B" text  NOT NULL )

CREATE TABLE "public"."_UserFollows" (
"A" text  NOT NULL ,"B" text  NOT NULL )

CREATE UNIQUE INDEX "CodeConfirm.logInId" ON "public"."CodeConfirm"("logInId")

CREATE UNIQUE INDEX "CodeConfirm.email" ON "public"."CodeConfirm"("email")

CREATE UNIQUE INDEX "User.email" ON "public"."User"("email")

CREATE UNIQUE INDEX "User.logInId" ON "public"."User"("logInId")

CREATE UNIQUE INDEX "_UserBan_AB_unique" ON "public"."_UserBan"("A","B")

CREATE  INDEX "_UserBan_B_index" ON "public"."_UserBan"("B")

CREATE UNIQUE INDEX "_UserFollows_AB_unique" ON "public"."_UserFollows"("A","B")

CREATE  INDEX "_UserFollows_B_index" ON "public"."_UserFollows"("B")

ALTER TABLE "public"."BookMark" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Claim" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Comment" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Comment" ADD FOREIGN KEY ("postId")REFERENCES "public"."Post"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."CommentDis" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."CommentDis" ADD FOREIGN KEY ("commentId")REFERENCES "public"."Comment"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."CommentLike" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."CommentLike" ADD FOREIGN KEY ("commentId")REFERENCES "public"."Comment"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Post" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."PostDis" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."PostDis" ADD FOREIGN KEY ("postId")REFERENCES "public"."Post"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."PostLike" ADD FOREIGN KEY ("authorId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."PostLike" ADD FOREIGN KEY ("postId")REFERENCES "public"."Post"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Forbidden" ADD FOREIGN KEY ("subjectId")REFERENCES "public"."User"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Penalty" ADD FOREIGN KEY ("postId")REFERENCES "public"."Post"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Penalty" ADD FOREIGN KEY ("commentId")REFERENCES "public"."Comment"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."Penalty" ADD FOREIGN KEY ("reportId")REFERENCES "public"."Report"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."AdminComment" ADD FOREIGN KEY ("postId")REFERENCES "public"."AdminPost"("id") ON DELETE SET NULL  ON UPDATE CASCADE

ALTER TABLE "public"."_UserBan" ADD FOREIGN KEY ("A")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_UserBan" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_UserFollows" ADD FOREIGN KEY ("A")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE

ALTER TABLE "public"."_UserFollows" ADD FOREIGN KEY ("B")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration ..20200706120945-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,0 +1,208 @@
+generator client {
+  provider = "prisma-client-js"
+}
+
+datasource db {
+  provider = "postgresql"
+  url      = env("DATABASE_URL")
+}
+
+model BookMark {
+  authorId  String?
+  createdAt DateTime @default(now())
+  id        String   @id @default(cuid())
+  postId    String
+  author    User?    @relation(fields: [authorId], references: [id])
+}
+
+model Claim {
+  authorId   String?
+  createdAt  DateTime @default(now())
+  email      String
+  id         String   @id @default(cuid())
+  postNumber Int      @default(autoincrement())
+  text       String
+  title      String
+  type       String
+  author     User?    @relation(fields: [authorId], references: [id])
+}
+
+model CodeConfirm {
+  code    String?
+  logInId String?   @unique
+  email   String?   @unique
+  id      String    @id @default(cuid())
+}
+
+model Comment {
+  authorId     String?
+  createdAt    DateTime      @default(now())
+  id           String        @id @default(cuid())
+  likeCounts   Int           @default(0)
+  nick         String        @default("")
+  postId       String?
+  published    Boolean       @default(true)
+  reportCounts Int           @default(0)
+  text         String
+  updatedAt    DateTime      @default(now())
+  author       User?          @relation(fields: [authorId], references: [id])
+  post         Post?          @relation(fields: [postId], references: [id])
+  commentDis   CommentDis[]
+  commentLike  CommentLike[]
+  penalty      Penalty[]
+}
+
+model CommentDis {
+  authorId  String?
+  commentId String?
+  createdAt DateTime  @default(now())
+  id        String    @id @default(cuid())
+  author    User?      @relation(fields: [authorId], references: [id])
+  comment   Comment?   @relation(fields: [commentId], references: [id])
+}
+
+model CommentLike {
+  authorId  String?
+  commentId String?
+  createdAt DateTime @default(now())
+  id        String   @id @default(cuid())
+  author    User?    @relation(fields: [authorId], references: [id])
+  comment   Comment? @relation(fields: [commentId], references: [id])
+}
+
+model Post {
+  allowComments Boolean    @default(true)
+  authorId      String?
+  category      String?
+  createdAt     DateTime   @default(now())
+  hits          Int        @default(0)
+  id            String     @id @default(cuid())
+  isHtml        Boolean?   @default(false)
+  likeCounts    Int        @default(0)
+  postNumber    Int        @default(autoincrement())
+  published     Boolean    @default(true)
+  reportCounts  Int        @default(0)
+  text          String
+  title         String
+  updatedAt     DateTime   @default(now())
+  url           String[]
+  author        User?      @relation(fields: [authorId], references: [id])
+  comment       Comment[]
+  postdis       PostDis[]
+  postLike      PostLike[]
+  penalty       Penalty[]
+}
+
+model PostDis {
+  authorId  String?
+  createdAt DateTime @default(now())
+  id        String   @id @default(cuid())
+  postId    String?
+  author    User?    @relation(fields: [authorId], references: [id])
+  post      Post?    @relation(fields: [postId], references: [id])
+}
+
+model PostLike {
+  authorId  String?
+  createdAt DateTime @default(now())
+  id        String   @id @default(cuid())
+  postId    String?
+  author    User?    @relation(fields: [authorId], references: [id])
+  post      Post?    @relation(fields: [postId], references: [id])
+}
+
+model Report {
+  id          String   @id @default(cuid())
+  createdAt   DateTime @default(now())
+  reporter    String
+  suspect     String?
+  report      String?
+  where       String
+  done        Boolean  @default(false)
+  original    String
+  type        String
+  penalty     Penalty[]
+}
+
+model Forbidden {
+  id          String   @id @default(cuid())
+  createdAt   DateTime @default(now())
+  subjectId   String? 
+  subject     User?    @relation(fields: [subjectId], references: [id])
+  cause       String?
+  original    String?
+  where       String?
+  term        Float?
+  released    Boolean  @default(false)
+  marshal     String?
+}
+
+model Penalty {
+  id          String   @id @default(cuid())
+  createdAt   DateTime @default(now())
+  postId      String? 
+  post        Post?    @relation(fields: [postId], references: [id])
+  commentId   String? 
+  comment     Comment? @relation(fields: [commentId], references: [id])
+  reportId    String? 
+  report      Report?  @relation(fields: [reportId], references: [id])
+  cause       String?
+  original    String?
+  marshal     String?  
+  punishment  String?
+  suspect     String?
+}
+
+model User {
+  id                 String        @id @default(cuid())
+  email              String?       @unique
+  logInId            String        @unique
+  nick               String        @default("none")
+  role               Role          @default(USER)
+  password           String
+  secret             String
+  createdAt          DateTime      @default(now())
+  reportCounts       Int           @default(0)
+  isForbidden        Boolean       @default(false)
+  forbidden          Forbidden[] 
+  banList            String[]
+  followList         String[]
+  lastLoggedIn       Float         @default(0)
+  bookmark           BookMark[]
+  claim              Claim[]
+  comment            Comment[]
+  commentDis         CommentDis[]
+  commentLike        CommentLike[]
+  post               Post[]
+  postDis            PostDis[]
+  postLike           PostLike[]
+  banning            User[]        @relation("UserBan", references: [id])
+  banners            User[]        @relation("UserBan", references: [id])
+  following          User[]        @relation("UserFollows", references: [id])
+  followers          User[]        @relation("UserFollows", references: [id])
+}
+
+model AdminPost {
+  authorId      String?
+  createdAt     DateTime   @default(now())
+  id            String     @id @default(cuid())
+  text          String
+  title         String
+  adminComment  AdminComment[]
+}
+
+model AdminComment {
+  authorId     String?
+  createdAt    DateTime     @default(now())
+  id           String       @id @default(cuid())
+  text         String
+  postId       String? 
+  post         AdminPost?   @relation(fields: [postId], references: [id])
+}
+
+enum Role {
+  ADMIN
+  MARSHAL
+  USER
+  VIEWER
+}
```


